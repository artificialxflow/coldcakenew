# راهنمای تست فاز ۷: تست کامل و یکپارچه (E2E & Final Check)

این سند مراحل تست نهایی سیستم را پوشش می‌دهد. در این فاز، تمامی اجزا (محصول، سبد خرید، سفارش، پروفایل و...) به صورت یکپارچه در یک سناریوی واقعی تست می‌شوند.

---

## سناریوی تست کامل (Full User Journey)

### داستان کاربر (User Story):
**"کاربر جدیدی وارد سایت می‌شود، ثبت نام می‌کند، محصولی را جستجو می‌کند، به سبد خرید اضافه می‌کند و خرید را نهایی می‌کند."**

### مراحل تست:

1.  **ثبت نام / ورود (Auth)**:
    *   ایجاد یک کاربر جدید (تست API ثبت نام).
    *   دریافت توکن یا Session.

2.  **مرور محصولات (Browse)**:
    *   جستجوی محصول (مثلاً "Ring").
    *   مشاهده جزئیات محصول و چک کردن موجودی.

3.  **سبد خرید (Cart)**:
    *   افزودن محصول به سبد.
    *   تغییر تعداد.
    *   مشاهده فاکتور اولیه.

4.  **تسویه حساب (Checkout)**:
    *   ثبت آدرس و مشخصات گیرنده.
    *   انتخاب روش پرداخت.
    *   ثبت نهایی سفارش.

5.  **بررسی نهایی (Post-Purchase)**:
    *   اطمینان از کسر موجودی.
    *   اطمینان از ثبت سفارش در تاریخچه سفارشات کاربر.
    *   اطمینان از دریافت پیام تایید (شبیه‌سازی).

---

## نتایج تست‌های خودکار (Automated Verification Log)

| ردیف | مرحله | وضعیت | توضیحات |
| :--- | :--- | :--- | :--- |
| 1 | ثبت نام کاربر جدید | [x] | یوزر و کاستومر ایجاد شد |
| 2 | جستجوی محصول | [x] | محصول پیدا شد |
| 3 | پروسه سبد خرید | [x] | آیتم اضافه و آپدیت شد |
| 4 | ثبت سفارش نهایی | [x] | سفارش با موفقیت ثبت شد (شماره سفارش تولید شد) |
| 5 | بررسی تغییرات سیستم | [x] | موجودی کسر شد (5 به 4) و فاکتور صادر گردید |

**تاریخ اجرا**: 2026-02-05
**اسکریپت**: `scripts/test-phase-7.ts`

---

## اسکریپت نهایی
اسکریپت `scripts/test-phase-7.ts` این سناریو را به صورت کامل اجرا می‌کند.
