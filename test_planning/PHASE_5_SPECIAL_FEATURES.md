# راهنمای تست فاز ۵: ویژگی‌های خاص (Special Features)

این سند شامل دستورالعمل‌های تست دستی و نتایج تست‌های خودکار برای ماژول‌های قیمت طلا، اسکرپر نقشه‌ها و بلاگ است.

---

## 1. سیستم قیمت طلا (Gold Price)

### الف) آپدیت قیمت طلا
**سناریو**: تغییر قیمت طلا و بررسی تاثیر آن (که در فاز ۲ هم تست شد، اینجا تمرکز روی تاریخچه است).
**روش تست دستی (API)**:
*   **Endpoint**: `POST /api/gold-price`
*   **Body**:
    ```json
    {
      "price": 15000000,
      "change": 5000,
      "changePercent": 0.5
    }
    ```
*   **نتیجه مورد انتظار**:
    *   رکورد جدید در `GoldPrice` ایجاد شود.
    *   رکورد در `GoldPriceHistory` ذخیره شود.
    *   فیلد `trend` (بالا/پایین/ثابت) به درستی محاسبه شود.

---

## 2. اسکرپر نقشه‌ها (Maps Scraper)

### الف) ایجاد تارگت اسکرپ
**سناریو**: تعریف یک هدف جدید برای جمع‌آوری اطلاعات مشاغل.
**روش تست دستی**:
*   **Endpoint**: `POST /api/scraper/targets`
*   **Body**:
    ```json
    {
      "keyword": "طلافروشی",
      "city": "تهران",
      "priority": "high"
    }
    ```

### ب) اجرای اسکرپ (شبیه‌سازی)
*   **Endpoint**: `POST /api/scraper/run/[TARGET_ID]`
*   **نتیجه**:
    *   وضعیت به `running` و سپس `completed` تغییر کند.
    *   تعداد `totalFound` آپدیت شود.
    *   (در حالت شبیه‌سازی فعلی، دیتای واقعی برنمی‌گردد اما پروسه اجرا می‌شود).

---

## 3. بلاگ (Blog)

### الف) مدیریت مقالات
**سناریو**: ایجاد و انتشار مقاله.
**روش تست دستی**:
*   **Endpoint**: `POST /api/blog/posts`
*   **Body**:
    ```json
    {
      "title": "راهنمای خرید طلا",
      "content": "متن مقاله...",
      "category": "آموزشی",
      "published": true
    }
    ```
*   **بررسی Slug**: اسلاگ باید به صورت خودکار از روی عنوان (انگلیسی یا فینگلیش/فارسی) و یکتا تولید شود.

---

## نتایج تست‌های خودکار (Automated Verification Log)

| ردیف | مورد تست | وضعیت | توضیحات |
| :--- | :--- | :--- | :--- |
| 1 | ثبت قیمت طلا و تاریخچه | [x] | رکورد و هیستوری ثبت شد |
| 2 | محاسبه Trend قیمت | [x] | ترند صعودی درست تشخیص داده شد |
| 3 | ایجاد اسکرپ تارگت | [x] | تارگت ایجاد شد |
| 4 | اجرای اسکرپ (شبیه‌سازی) | [x] | اجرا موفقیت‌آمیز بود (Status: Completed) |
| 5 | ایجاد پست بلاگ | [x] | پست با موفقیت ایجاد شد |
| 6 | بررسی یکتایی Slug | [x] | اسلاگ تکراری هندل شد (Suffix added) |

**تاریخ اجرا**: 2026-02-05
**اسکریپت**: `scripts/test-phase-5.ts`

---

## اسکریپت‌های کمکی
اسکریپت `scripts/test-phase-5.ts` برای تست این سناریوها استفاده می‌شود.
